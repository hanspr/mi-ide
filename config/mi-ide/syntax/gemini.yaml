filetype: gemini

detect:
    filename: "\\.gemini$"

rules:
    # Tables (Github extension)
    - normal: ".*\\|.*"

    # quotes
    - method: "^[:>].+"
    - identifier.var: "^;.+"

    - md-table: "(?:\\|.+?)+\\|"
    - md-bold: "^\\|[^\\|]+"

      # italic
    - md-italic: "[^_\\w]_(?:.+?)_[^_\\w]"

      # Strong emphasis
    - md-italic: "[^\\*_][\\*_](?:.+?)[\\*_][^\\*_]"
    - md-bold: "__(?:.+?)__"
    - md-bold: "\\*\\*(?:.+?)\\*\\*"
    - constant: "`(?:.+?)`"

      # strike-through
    - type: "(^|[[:space:]])~~[^ ][^~]*~~"

      # horizontal rules
    - special: "(---+|===+|___+|\\*\\*\\*+)\\s*$"
    - statusline: "\\|"
    - statusline: "(?:\\|[-:]+)+\\|"

      # headlines
    - md-head:  "^#{1,6}.*"

      # lists
    - identifier:   "^[[:space:]]*[\\*+-] |^[[:space:]]*[0-9]+\\. "

      # misc
    - preproc:   "(\\(([CcRr]|[Tt][Mm])\\)|\\.{3}|(^|[[:space:]])\\-\\-($|[[:space:]]))"

      # links
    - constant: "\\[[^]]+\\]"
    - constant: "\\[([^][]|\\[[^]]*\\])*\\]\\([^)]+\\)"

      # images
    - underlined: "!\\[[^][]*\\](\\([^)]+\\)|\\[[^]]+\\])"

      # urls
    - constant.string.url: "https?://[^ )>]+"
    - constant.string: "\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\""

    #- constant.string: "^ {3,}.*"
    - invisible: "_+|\\*+"
    - invisible: "`"

    # bloques de cÃ³digo
    - statusline:
        start: "```perl$"
        end: "```$"
        rules:
            - default: "."
            - include: "perl"
    - statusline:
        start: "```javascript$"
        end: "```$"
        rules:
            - default: "."
            - include: "javascript"
    - statusline:
        start: "```go$"
        end: "```$"
        rules:
            - default: "."
            - include: "go"
    - statusline:
        start: "```lua$"
        end: "```$"
        rules:
            - default: "."
            - include: "lua"
    - statusline:
        start: "```python$"
        end: "```$"
        rules:
            - default: "."
            - include: "python"
    - statusline:
        start: "```html$"
        end: "```$"
        rules:
            - default: "."
            - include: "html"
            - include: "javascript"
    - statusline:
        start: "```(?:\\w+)$"
        end: "```$"
        rules:
            - comment: "."
    - constant:
        start: "```$"
        end: "```$"
        rules:
            - default: "."
